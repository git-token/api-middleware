'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _web = require('web3');

var _web2 = _interopRequireDefault(_web);

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _KeystoreGenerator2 = require('./KeystoreGenerator');

var _KeystoreGenerator3 = _interopRequireDefault(_KeystoreGenerator2);

var _index = require('./analytics/index');

var _index2 = _interopRequireDefault(_index);

var _configure = require('./analytics/configure');

var _configure2 = _interopRequireDefault(_configure);

var _index3 = require('./smtp/index');

var _index4 = require('./websocket/index');

var _index5 = require('./utils/index');

var _index6 = require('./api/index');

var _index7 = _interopRequireDefault(_index6);

var _index8 = require('./hyperlog/index');

var _index9 = require('./events/index');

var _index10 = require('./contract/index');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var GitTokenContract = '{\n  "contract_name": "GitToken",\n  "abi": [\n    {\n      "constant": false,\n      "inputs": [],\n      "name": "name",\n      "outputs": [\n        {\n          "name": "_name",\n          "type": "string"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_spender",\n          "type": "address"\n        },\n        {\n          "name": "_value",\n          "type": "uint256"\n        }\n      ],\n      "name": "approve",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [],\n      "name": "totalSupply",\n      "outputs": [\n        {\n          "name": "_supply",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_username",\n          "type": "string"\n        }\n      ],\n      "name": "getContributorAddress",\n      "outputs": [\n        {\n          "name": "_contributorAddress",\n          "type": "address"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_from",\n          "type": "address"\n        },\n        {\n          "name": "_to",\n          "type": "address"\n        },\n        {\n          "name": "_value",\n          "type": "uint256"\n        }\n      ],\n      "name": "transferFrom",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [],\n      "name": "organization",\n      "outputs": [\n        {\n          "name": "_organization",\n          "type": "string"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [],\n      "name": "decimals",\n      "outputs": [\n        {\n          "name": "_decimals",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [],\n      "name": "getTokenLockUntilDate",\n      "outputs": [\n        {\n          "name": "_lockedUntil",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_contributorAddress",\n          "type": "address"\n        }\n      ],\n      "name": "getContributorUsername",\n      "outputs": [\n        {\n          "name": "_username",\n          "type": "string"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_rewardValue",\n          "type": "uint256"\n        },\n        {\n          "name": "_rewardType",\n          "type": "string"\n        }\n      ],\n      "name": "setRewardValue",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "",\n          "type": "address"\n        }\n      ],\n      "name": "owner",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_holder",\n          "type": "address"\n        }\n      ],\n      "name": "balanceOf",\n      "outputs": [\n        {\n          "name": "_balance",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_username",\n          "type": "string"\n        }\n      ],\n      "name": "getUnclaimedRewards",\n      "outputs": [\n        {\n          "name": "_value",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_auctionRound",\n          "type": "uint256"\n        }\n      ],\n      "name": "executeBid",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": true,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_rewardType",\n          "type": "string"\n        },\n        {\n          "name": "_reservedType",\n          "type": "string"\n        }\n      ],\n      "name": "getRewardDetails",\n      "outputs": [\n        {\n          "name": "_rewardValue",\n          "type": "uint256"\n        },\n        {\n          "name": "_reservedValue",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [],\n      "name": "symbol",\n      "outputs": [\n        {\n          "name": "_symbol",\n          "type": "string"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_to",\n          "type": "address"\n        },\n        {\n          "name": "_value",\n          "type": "uint256"\n        }\n      ],\n      "name": "transfer",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_auctionRound",\n          "type": "uint256"\n        },\n        {\n          "name": "_weightedAveragePrice",\n          "type": "uint256"\n        }\n      ],\n      "name": "sealAuction",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_initialPrice",\n          "type": "uint256"\n        },\n        {\n          "name": "_delay",\n          "type": "uint256"\n        },\n        {\n          "name": "_lockTokens",\n          "type": "bool"\n        }\n      ],\n      "name": "initializeAuction",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_reservedValue",\n          "type": "uint256"\n        },\n        {\n          "name": "_rewardType",\n          "type": "string"\n        },\n        {\n          "name": "_reservedType",\n          "type": "string"\n        }\n      ],\n      "name": "setReservedValue",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_contributor",\n          "type": "address"\n        },\n        {\n          "name": "_username",\n          "type": "string"\n        }\n      ],\n      "name": "verifyContributor",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": true,\n      "inputs": [\n        {\n          "name": "_owner",\n          "type": "address"\n        },\n        {\n          "name": "_spender",\n          "type": "address"\n        }\n      ],\n      "name": "allowance",\n      "outputs": [\n        {\n          "name": "_allowance",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "_username",\n          "type": "string"\n        },\n        {\n          "name": "_rewardType",\n          "type": "string"\n        },\n        {\n          "name": "_reservedType",\n          "type": "string"\n        },\n        {\n          "name": "_rewardBonus",\n          "type": "uint256"\n        },\n        {\n          "name": "_deliveryID",\n          "type": "string"\n        }\n      ],\n      "name": "rewardContributor",\n      "outputs": [\n        {\n          "name": "",\n          "type": "bool"\n        }\n      ],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "constant": false,\n      "inputs": [\n        {\n          "name": "newOwner",\n          "type": "address"\n        }\n      ],\n      "name": "transferOwnership",\n      "outputs": [],\n      "payable": false,\n      "type": "function"\n    },\n    {\n      "inputs": [\n        {\n          "name": "_contributor",\n          "type": "address"\n        },\n        {\n          "name": "_name",\n          "type": "string"\n        },\n        {\n          "name": "_username",\n          "type": "string"\n        },\n        {\n          "name": "_organization",\n          "type": "string"\n        },\n        {\n          "name": "_symbol",\n          "type": "string"\n        },\n        {\n          "name": "_decimals",\n          "type": "uint256"\n        }\n      ],\n      "payable": false,\n      "type": "constructor"\n    },\n    {\n      "payable": false,\n      "type": "fallback"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": true,\n          "name": "owner",\n          "type": "address"\n        },\n        {\n          "indexed": true,\n          "name": "spender",\n          "type": "address"\n        },\n        {\n          "indexed": false,\n          "name": "value",\n          "type": "uint256"\n        }\n      ],\n      "name": "Approval",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": true,\n          "name": "from",\n          "type": "address"\n        },\n        {\n          "indexed": true,\n          "name": "to",\n          "type": "address"\n        },\n        {\n          "indexed": false,\n          "name": "value",\n          "type": "uint256"\n        }\n      ],\n      "name": "Transfer",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": true,\n          "name": "contributor",\n          "type": "address"\n        },\n        {\n          "indexed": false,\n          "name": "username",\n          "type": "string"\n        },\n        {\n          "indexed": false,\n          "name": "value",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "reservedValue",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "date",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "rewardType",\n          "type": "string"\n        }\n      ],\n      "name": "Contribution",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": true,\n          "name": "contributor",\n          "type": "address"\n        },\n        {\n          "indexed": false,\n          "name": "username",\n          "type": "string"\n        },\n        {\n          "indexed": false,\n          "name": "date",\n          "type": "uint256"\n        }\n      ],\n      "name": "ContributorVerified",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": false,\n          "name": "rewardType",\n          "type": "string"\n        },\n        {\n          "indexed": false,\n          "name": "reservedType",\n          "type": "string"\n        },\n        {\n          "indexed": false,\n          "name": "value",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "date",\n          "type": "uint256"\n        }\n      ],\n      "name": "RewardValueSet",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": false,\n          "name": "auctionRound",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "startDate",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "endDate",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "lockDate",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "tokensOffered",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "initialPrice",\n          "type": "uint256"\n        }\n      ],\n      "name": "NewAuction",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": false,\n          "name": "auctionRound",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "weightedAveragePrice",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "fundLimit",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "date",\n          "type": "uint256"\n        }\n      ],\n      "name": "SealAuction",\n      "type": "event"\n    },\n    {\n      "anonymous": false,\n      "inputs": [\n        {\n          "indexed": false,\n          "name": "auctionRound",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "numberOfHolders",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "fundsCollected",\n          "type": "uint256"\n        },\n        {\n          "indexed": false,\n          "name": "date",\n          "type": "uint256"\n        }\n      ],\n      "name": "AuctionResults",\n      "type": "event"\n    }\n  ],\n  "unlinked_binary": "0x606060405234156200001057600080fd5b60405162003b1638038062003b1683398101604052808051919060200180518201919060200180518201919060200180518201919060200180518201919060200180519150505b5b600160a060020a0333166000908152602081905260409020805460ff191660011790555b600160a060020a038616156200015457600160a060020a038616600090815260208181526040808320805460ff19166001179055600b9091529020848051620000ca92916020019062000ccd565b5085600c856040518082805190602001908083835b602083106200010157805182525b601f199092019160209182019101620000df565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040519081900390208054600160a060020a031916600160a060020a03929092169190911790555b600060015560038580516200016e92916020019062000ccd565b5060048380516200018492916020019062000ccd565b5060058280516200019a92916020019062000ccd565b5060028190556000600a6040517f6d696c6573746f6e6500000000000000000000000000000000000000000000008152600981019190915260290160405180910390206040517f63726561746564000000000000000000000000000000000000000000000000008152600781019190915260270160405180910390208190555080600a0a619c400260016009016040517f6d696c6573746f6e6500000000000000000000000000000000000000000000008152600981019190915260290160405180910390206040517f636c6f736564000000000000000000000000000000000000000000000000000081526006810191909152602601604051908190039020556000600a6040517f6f7267616e697a6174696f6e00000000000000000000000000000000000000008152600c810191909152602c0160405180910390206040517f6d656d6265725f696e76697465640000000000000000000000000000000000008152600e810191909152602e0160405180910390208190555080600a0a613a980260016009016040517f6f7267616e697a6174696f6e00000000000000000000000000000000000000008152600c810191909152602c0160405180910390206040517f6d656d6265725f616464656400000000000000000000000000000000000000008152600c810191909152602c01604051908190039020556109c4600a82900a0260096040517f70696e6700000000000000000000000000000000000000000000000000000000815260048101919091526024016040519081900390205560fa600a82900a0260096040517f636f6d6d69745f636f6d6d656e740000000000000000000000000000000000008152600e810191909152602e01604051908190039020556109c4600a82900a0260096040517f63726561746500000000000000000000000000000000000000000000000000008152600681019190915260260160405190819003902055600060096040517f64656c65746500000000000000000000000000000000000000000000000000008152600681019190915260260160405190819003902055611388600a82900a0260096040517f6465706c6f796d656e74000000000000000000000000000000000000000000008152600a810191909152602a01604051908190039020556064600a82900a0260096040517f6465706c6f796d656e745f7374617475730000000000000000000000000000008152601181019190915260310160405190819003902055611388600a82900a0260096040517f666f726b0000000000000000000000000000000000000000000000000000000081526004810191909152602401604051908190039020556064600a82900a0260096040517f676f6c6c756d0000000000000000000000000000000000000000000000000000815260068101919091526026016040519081900390205560fa600a82900a0260096040517f696e7374616c6c6174696f6e00000000000000000000000000000000000000008152600c810191909152602c01604051908190039020556103e8600a82900a0260096040517f696e7374616c6c6174696f6e5f7265706f7369746f7269657300000000000000815260198101919091526039016040519081900390205560fa600a82900a0260096040517f69737375655f636f6d6d656e74000000000000000000000000000000000000008152600d810191909152602d01604051908190039020556101f4600a82900a0260096040517f697373756573000000000000000000000000000000000000000000000000000081526006810191909152602601604051908190039020556064600a82900a0260096040517f6c6162656c0000000000000000000000000000000000000000000000000000008152600581019190915260250160405190819003902055600060096040517f6d61726b6574706c6163655f707572636861736573000000000000000000000081526015810191909152603501604051908190039020556103e8600a82900a0260096040517f6d656d626572000000000000000000000000000000000000000000000000000081526006810191909152602601604051908190039020556103e8600a82900a0260096040517f6d656d62657273686970000000000000000000000000000000000000000000008152600a810191909152602a016040519081900390205560fa600a82900a0260096040517f6d696c6573746f6e65000000000000000000000000000000000000000000000081526009810191909152602901604051908190039020556103e8600a82900a0260096040517f6f7267616e697a6174696f6e00000000000000000000000000000000000000008152600c810191909152602c0160405190819003902055600060096040517f6f72675f626c6f636b000000000000000000000000000000000000000000000081526009810191909152602901604051908190039020556101f4600a82900a0260096040517f706167655f6275696c64000000000000000000000000000000000000000000008152600a810191909152602a016040519081900390205560fa600a82900a0260096040517f70726f6a6563745f6361726400000000000000000000000000000000000000008152600c810191909152602c01604051908190039020556032600a82900a0260096040517f70726f6a6563745f636f6c756d6e0000000000000000000000000000000000008152600e810191909152602e01604051908190039020556103e8600a82900a0260096040517f70726f6a656374000000000000000000000000000000000000000000000000008152600781019190915260270160405190819003902055612710600a82900a0260096040517f7075626c69630000000000000000000000000000000000000000000000000000815260068101919091526026016040519081900390205560fa600a82900a0260096040517f70756c6c5f726571756573745f7265766965775f636f6d6d656e7400000000008152601b810191909152603b016040519081900390205560fa600a82900a0260096040517f70756c6c5f726571756573745f7265766965770000000000000000000000000081526013810191909152603301604051908190039020556109c4600a82900a0260096040517f70756c6c5f7265717565737400000000000000000000000000000000000000008152600c810191909152602c01604051908190039020556103e8600a82900a0260096040517f707573680000000000000000000000000000000000000000000000000000000081526004810191909152602401604051908190039020556109c4600a82900a0260096040517f7265706f7369746f7279000000000000000000000000000000000000000000008152600a810191909152602a0160405190819003902055611388600a82900a0260096040517f72656c6561736500000000000000000000000000000000000000000000000000815260078101919091526027016040519081900390205560c8600a82900a0260096040517f737461747573000000000000000000000000000000000000000000000000000081526006810191909152602601604051908190039020556107d0600a82900a0260096040517f7465616d0000000000000000000000000000000000000000000000000000000081526004810191909152602401604051908190039020556107d0600a82900a0260096040517f7465616d5f61646400000000000000000000000000000000000000000000000081526008810191909152602801604051908190039020556064600a82900a0260096040517f776174636800000000000000000000000000000000000000000000000000000081526005810191909152602501604051908190039020555b50505050505062000d77565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1062000d1057805160ff191683800117855562000d40565b8280016001018555821562000d40579182015b8281111562000d4057825182559160200191906001019062000d23565b5b5062000d4f92915062000d53565b5090565b62000d7491905b8082111562000d4f576000815560010162000d5a565b5090565b90565b612d8f8062000d876000396000f3006060604052361561013b5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde038114610153578063095ea7b3146101de57806318160ddd146102145780631e923ded1461023957806323b872dd146102a657806323bd4d7a146102e2578063313ce5671461036d57806355d674271461039257806355ded44d146103b757806366253c441461044e578063666e1b39146104b857806370a08231146104eb57806376500a7e1461051c578063839440b21461057f57806392956c1e1461059e57806395d89b4114610649578063a9059cbb146106d4578063ad7bec0d1461070a578063b15724fe14610737578063cdf25db314610769578063d85600ca14610815578063dd62ed3e14610888578063e9dc1a95146108bf578063f2fde38b146109f3575b341561014657600080fd5b6101515b600080fd5b565b005b341561015e57600080fd5b610166610a14565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101a35780820151818401525b60200161018a565b50505050905090810190601f1680156101d05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156101e957600080fd5b610200600160a060020a0360043516602435610abe565b604051901515815260200160405180910390f35b341561021f57600080fd5b610227610b74565b60405190815260200160405180910390f35b341561024457600080fd5b61028a60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610b7b95505050505050565b604051600160a060020a03909116815260200160405180910390f35b34156102b157600080fd5b610200600160a060020a0360043581169060243516604435610bf6565b604051901515815260200160405180910390f35b34156102ed57600080fd5b610166610c8a565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101a35780820151818401525b60200161018a565b50505050905090810190601f1680156101d05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561037857600080fd5b610227610d34565b60405190815260200160405180910390f35b341561039d57600080fd5b610227610d3b565b60405190815260200160405180910390f35b34156103c257600080fd5b610166600160a060020a0360043516610d42565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101a35780820151818401525b60200161018a565b50505050905090810190601f1680156101d05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561045957600080fd5b610200600480359060446024803590810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610e1395505050505050565b604051901515815260200160405180910390f35b34156104c357600080fd5b610200600160a060020a0360043516610f68565b604051901515815260200160405180910390f35b34156104f657600080fd5b610227600160a060020a0360043516610f7d565b60405190815260200160405180910390f35b341561052757600080fd5b61022760046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610f9c95505050505050565b60405190815260200160405180910390f35b61020060043561100d565b604051901515815260200160405180910390f35b34156105a957600080fd5b61063160046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405281815292919060208401838380828437509496506110fe95505050505050565b60405191825260208201526040908101905180910390f35b341561065457600080fd5b610166611240565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101a35780820151818401525b60200161018a565b50505050905090810190601f1680156101d05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156106df57600080fd5b610200600160a060020a03600435166024356112ea565b604051901515815260200160405180910390f35b341561071557600080fd5b61020060043560243561136a565b604051901515815260200160405180910390f35b341561074257600080fd5b6102006004356024356044351515611424565b604051901515815260200160405180910390f35b341561077457600080fd5b610200600480359060446024803590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061150095505050505050565b604051901515815260200160405180910390f35b341561082057600080fd5b61020060048035600160a060020a03169060446024803590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061171595505050505050565b604051901515815260200160405180910390f35b341561089357600080fd5b610227600160a060020a0360043581169060243516611810565b60405190815260200160405180910390f35b34156108ca57600080fd5b61020060046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001909190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061183d95505050505050565b604051901515815260200160405180910390f35b34156109fe57600080fd5b610151600160a060020a0360043516611b7d565b005b610a1c612cb1565b60038054600260001961010060018416150201909116046020601f82018190048102016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ab35780601f10610a8857610100808354040283529160200191610ab3565b820191906000526020600020905b815481529060010190602001808311610a9657829003601f168201915b505050505090505b90565b6000600236604414610acf57600080fd5b82158015610b005750600160a060020a033381166000908152600d6020908152604080832093881683529290522054155b1515610b0b57600080fd5b600160a060020a033381166000818152600d6020908152604080832094891680845294909152908190208690557f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259086905190815260200160405180910390a35b5b5092915050565b6001545b90565b6000600c826040518082805190602001908083835b60208310610bb057805182525b601f199092019160209182019101610b90565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a031690505b919050565b6007546000904211610c0757600080fd5b600336606414610c1657600080fd5b610c29600186868663ffffffff611c0316565b1515610c3457600080fd5b83600160a060020a031685600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8560405190815260200160405180910390a3600191505b5b505b9392505050565b610c92612cb1565b60048054600260001961010060018416150201909116046020601f82018190048102016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ab35780601f10610a8857610100808354040283529160200191610ab3565b820191906000526020600020905b815481529060010190602001808311610a9657829003601f168201915b505050505090505b90565b6002545b90565b6007545b90565b610d4a612cb1565b6001600a01600083600160a060020a0316600160a060020a031681526020019081526020016000208054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e065780601f10610ddb57610100808354040283529160200191610e06565b820191906000526020600020905b815481529060010190602001808311610de957829003601f168201915b505050505090505b919050565b600160a060020a03331660009081526020819052604081205460ff161515610e3a57600080fd5b826009836040518082805190602001908083835b60208310610e6e57805182525b601f199092019160209182019101610e4e565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020557fbab878453bea46cf2222f6dd20b3fa8d80dc6ca2b5d4f854173f07227a21e1a6828442604051808060200180602001858152602001848152602001838103835286818151815260200191508051906020019080838360005b83811015610f155780820151818401525b602001610efc565b50505050905090810190601f168015610f425780820380516001836020036101000a031916815260200191505b5092830390525060008152604090810193509150505180910390a15060015b5b92915050565b60006020819052908152604090205460ff1681565b600160a060020a0381166000908152600e60205260409020545b919050565b6000600f826040518082805190602001908083835b60208310610fd157805182525b601f199092019160209182019101610fb1565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390205490505b919050565b600080611023600184333463ffffffff611ce816565b905033600160a060020a031630600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405190815260200160405180910390a360008381526008602052604090206009015460ff16156110f357600083815260086020819052604091829020908101546006909101547f5124687ebf4b12510acc9417c75c9c15ddc94a77bec8aca6889d61c02a5898a692869291904290518085815260200184815260200183815260200182815260200194505050505060405180910390a15b600191505b50919050565b6000806009846040518082805190602001908083835b6020831061113457805182525b601f199092019160209182019101611114565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600a856040518082805190602001908083835b6020831061119c57805182525b601f19909201916020918201910161117c565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b6020831061120057805182525b601f1990920191602091820191016111e0565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902054915091505b9250929050565b611248612cb1565b60058054600260001961010060018416150201909116046020601f82018190048102016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ab35780601f10610a8857610100808354040283529160200191610ab3565b820191906000526020600020905b815481529060010190602001808311610a9657829003601f168201915b505050505090505b90565b60075460009042116112fb57600080fd5b61130d6001848463ffffffff611f9c16565b151561131857600080fd5b82600160a060020a031633600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8460405190815260200160405180910390a35060015b5b92915050565b600160a060020a03331660009081526020819052604081205460ff16151561139157600080fd5b6113a36001848463ffffffff61202416565b15156113ae57600080fd5b6000838152600860205260409081902060058101546007909101547f7dbcead426ca32224fb5f39a2538f5556a55e0f389a53dd96411722da3c6f20a92869291904290518085815260200184815260200183815260200182815260200194505050505060405180910390a15060015b5b92915050565b600160a060020a03331660009081526020819052604081205460ff16151561144b57600080fd5b61145e600185858563ffffffff6120a616565b151561146957600080fd5b600654600081815260086020526040908190206001810154600282015460075460038401546004909401547f258560b026a56a296599cd6b9470cc1143ece6f555f315dfcb1a846e3b354ca69695939492939192915180878152602001868152602001858152602001848152602001838152602001828152602001965050505050505060405180910390a15060015b5b9392505050565b600160a060020a03331660009081526020819052604081205460ff16151561152757600080fd5b83600a846040518082805190602001908083835b6020831061155b57805182525b601f19909201916020918201910161153b565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b602083106115bf57805182525b601f19909201916020918201910161159f565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020557fbab878453bea46cf2222f6dd20b3fa8d80dc6ca2b5d4f854173f07227a21e1a683838642604051808060200180602001858152602001848152602001838103835287818151815260200191508051906020019080838360005b838110156116675780820151818401525b60200161164e565b50505050905090810190601f1680156116945780820380516001836020036101000a031916815260200191505b50838103825286818151815260200191508051906020019080838360005b838110156116cb5780820151818401525b6020016116b2565b50505050905090810190601f1680156116f85780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390a15060015b5b9392505050565b600160a060020a03331660009081526020819052604081205460ff16151561173c57600080fd5b61174e6001848463ffffffff61225916565b151561175957600080fd5b82600160a060020a03167fce96c271d8db9db4a90e538f30d7ec5a63f116893c4636688d9ce1502b5cc93683426040518080602001838152602001828103825284818151815260200191508051906020019080838360005b838110156117ca5780820151818401525b6020016117b1565b50505050905090810190601f1680156117f75780820380516001836020036101000a031916815260200191505b50935050505060405180910390a25060015b5b92915050565b600160a060020a038083166000908152600d60209081526040808320938516835292905220545b92915050565b600160a060020a03331660009081526020819052604081205481908190819060ff16151561186a57600080fd5b61187f60018a8a8a8a8a63ffffffff6127de16565b151561188a57600080fd5b600c896040518082805190602001908083835b602083106118bd57805182525b601f19909201916020918201910161189d565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a031692506119758660098a6040518082805190602001908083835b6020831061193457805182525b601f199092019160209182019101611914565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020549063ffffffff612c6c16565b9150600a886040518082805190602001908083835b602083106119aa57805182525b601f19909201916020918201910161198a565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020876040518082805190602001908083835b60208310611a0e57805182525b601f1990920191602091820191016119ee565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902054905082600160a060020a03167f270e8b0620bd7a85855d0ae9401e7fa30ea6319fbf06c05f38cad80875f1cc018a8484428d604051808060200186815260200185815260200184815260200180602001838103835288818151815260200191508051906020019080838360005b83811015611ac85780820151818401525b602001611aaf565b50505050905090810190601f168015611af55780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b83811015611b2c5780820151818401525b602001611b13565b50505050905090810190601f168015611b595780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390a2600193505b5b50505095945050505050565b600160a060020a03331660009081526020819052604090205460ff161515611ba457600080fd5b600160a060020a03811660009081526020819052604090205460ff161515611bfe57600160a060020a03808216600090815260208190526040808220805460ff199081166001179091553390931682529020805490911690555b5b5b50565b600160a060020a038084166000908152600c86016020908152604080832033909416835292905290812054611c3e818463ffffffff612c8816565b600160a060020a038087166000908152600c89016020908152604080832033851684528252808320949094559187168152600d89019091522054611c88908463ffffffff612c6c16565b600160a060020a038086166000908152600d890160205260408082209390935590871681522054611cbf908463ffffffff612c8816565b600160a060020a0386166000908152600d88016020526040902055600191505b50949350505050565b6000838152600785016020526040812060090154819081908190819060ff1615611d1157600080fd5b60008881526007808b0160205260409091206006810154910154611d3a9163ffffffff612c8816565b935083861015611d4a5785611d4c565b835b9250838611611d5c576000611d60565b8386035b91506000821115611d9c57600160a060020a03871682156108fc0283604051600060405180830381858888f193505050501515611d9c57600080fd5b5b600088815260078a016020526040902060050154670de0b6b3a7640000811515611dc357fe5b0483811515611dce57fe5b04905060008111611dde57600080fd5b600088815260078a01602052604081206003015411611dfc57600080fd5b600088815260078a01602052604090206003015481901015611e1d57600080fd5b600088815260078a016020526040902060020154421015611e3d57600080fd5b600088815260078a016020526040902060080154611e6290600163ffffffff612c6c16565b600089815260078b0160205260409020600881019190915560060154611e8e908463ffffffff612c6c16565b600089815260078b0160205260409020600681019190915560030154611eba908263ffffffff612c8816565b600089815260078b016020908152604080832060030193909355600160a060020a0330168252600d8c0190522054611ef8908263ffffffff612c8816565b600160a060020a033081166000908152600d8c0160205260408082209390935590891681522054611f2f908263ffffffff612c6c16565b600160a060020a0388166000908152600d8b0160209081526040808320939093558a82526007808d019091529190209081015460069091015410611f8c57600088815260078a0160205260409020600901805460ff191660011790555b8094505b50505050949350505050565b600160a060020a0333166000908152600d84016020526040812054611fc7908363ffffffff612c8816565b600160a060020a033381166000908152600d870160205260408082209390935590851681522054611ffe908363ffffffff612c6c16565b600160a060020a0384166000908152600d860160205260409020555060015b9392505050565b600082815260078401602052604081206002015442101561204457600080fd5b6000821161205157600080fd5b6000838152600785016020526040902060050182905581670de0b6b3a764000081151561207a57fe5b6000858152600787810160205260409091206003810154939092049092029101555060015b9392505050565b600160a060020a0330166000908152600d85016020526040812054819015806120cd575084155b156120d757600080fd5b600160a060020a0330166000908152600d870160205260409020548511156120fe57600080fd5b60058601805460010190556000841161211a576203f48061211c565b835b905061212e428263ffffffff612c6c16565b600587018054600090815260078901602052604080822060019081019490945591548152200154612165908263ffffffff612c6c16565b6005808801805460009081526007808b016020818152604080852060020197909755600160a060020a0330168452600d8d018152868420548554855291905285832060030155825482528482206004018a90558254825284822090930181905581548152838120600601819055815481528381209092018290558054825282822060080182905554815220600901805460ff1916905582151560011461221357600086600601819055612244565b6005860154600090815260078701602052604090206002015461223c908263ffffffff612c6c16565b866006018190555b5060019150611cdf565b5b5b50949350505050565b6000600160a060020a038316151561227057600080fd5b600084600e01836040518082805190602001908083835b602083106122a757805182525b601f199092019160209182019101612287565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390205411156124045761237584600e01836040518082805190602001908083835b6020831061231957805182525b601f1990920191602091820191016122f9565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a0385166000908152600d870160205260409020549063ffffffff612c6c16565b600160a060020a0384166000908152600d860160205260408082209290925590600e8601908490518082805190602001908083835b602083106123ca57805182525b601f1990920191602091820191016123aa565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020556127d2565b82600160a060020a031684600b01836040518082805190602001908083835b6020831061244357805182525b601f199092019160209182019101612423565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a0316148015906125185750600084600d01600086600b01856040518082805190602001908083835b602083106124c757805182525b601f1990920191602091820191016124a7565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a03168152602081019190915260400160002054115b1561271057600160a060020a0383166000908152600a850160205260409020828051612548929160200190612cc3565b508284600b01836040518082805190602001908083835b6020831061257f57805182525b601f19909201916020918201910161255f565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055600d84016000600b8601846040518082805190602001908083835b6020831061261957805182525b601f1990920191602091820191016125f9565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a03908116825260208083019390935260409182016000908120549187168152600d8801938490528281209190915591908290600b8801908690518082805190602001908083835b602083106126bc57805182525b601f19909201916020918201910161269c565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a031681526020810191909152604001600020556127d2565b600160a060020a0383166000908152600a85016020526040902082805161273b929160200190612cc3565b508284600b01836040518082805190602001908083835b6020831061277257805182525b601f199092019160209182019101612752565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03929092169190911790555b5b5060015b9392505050565b60008060008061285e868b6008018a6040518082805190602001908083835b6020831061193457805182525b601f199092019160209182019101611914565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020549063ffffffff612c6c16565b925089600901886040518082805190602001908083835b6020831061289557805182525b601f199092019160209182019101612875565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020876040518082805190602001908083835b602083106128f957805182525b601f1990920191602091820191016128d9565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902054915089600b01896040518082805190602001908083835b6020831061296457805182525b601f199092019160209182019101612944565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902054600160a060020a03169050821580156129b0575081155b156129ba57600080fd5b89600f01856040518082805190602001908083835b602083106129ef57805182525b601f1990920191602091820191016129cf565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040519081900390205460ff16151560011415612a3657600080fd5b8954612a5a908390612a4e908663ffffffff612c6c16565b9063ffffffff612c6c16565b8a55600160a060020a0330166000908152600d8b016020526040902054612a87908363ffffffff612c6c16565b600160a060020a033081166000908152600d8d01602052604090209190915581161515612b9757612b28838b600e018b6040518082805190602001908083835b6020831061193457805182525b601f199092019160209182019101611914565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020549063ffffffff612c6c16565b8a600e018a6040518082805190602001908083835b60208310612b5d57805182525b601f199092019160209182019101612b3d565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902055612bde565b600160a060020a0381166000908152600d8b016020526040902054612bc2908463ffffffff612c6c16565b600160a060020a0382166000908152600d8c0160205260409020555b60018a600f01866040518082805190602001908083835b60208310612c1557805182525b601f199092019160209182019101612bf5565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020805460ff1916911515919091179055600193505b5b5b5050509695505050505050565b6000828201612c7d84821015612ca1565b8091505b5092915050565b6000612c9683831115612ca1565b508082035b92915050565b801515611bfe57600080fd5b5b50565b60206040519081016040526000815290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10612d0457805160ff1916838001178555612d31565b82800160010185558215612d31579182015b82811115612d31578251825591602001919060010190612d16565b5b50612d3e929150612d42565b5090565b610abb91905b80821115612d3e5760008155600101612d48565b5090565b905600a165627a7a72305820894eba58af161460ef6761717028ce491aa6b3005f36273c279f273cdb6aa72b0029",\n  "networks": {\n    "17": {\n      "links": {},\n      "events": {\n        "0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": true,\n              "name": "owner",\n              "type": "address"\n            },\n            {\n              "indexed": true,\n              "name": "spender",\n              "type": "address"\n            },\n            {\n              "indexed": false,\n              "name": "value",\n              "type": "uint256"\n            }\n          ],\n          "name": "Approval",\n          "type": "event"\n        },\n        "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": true,\n              "name": "from",\n              "type": "address"\n            },\n            {\n              "indexed": true,\n              "name": "to",\n              "type": "address"\n            },\n            {\n              "indexed": false,\n              "name": "value",\n              "type": "uint256"\n            }\n          ],\n          "name": "Transfer",\n          "type": "event"\n        },\n        "0x270e8b0620bd7a85855d0ae9401e7fa30ea6319fbf06c05f38cad80875f1cc01": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": true,\n              "name": "contributor",\n              "type": "address"\n            },\n            {\n              "indexed": false,\n              "name": "username",\n              "type": "string"\n            },\n            {\n              "indexed": false,\n              "name": "value",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "reservedValue",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "date",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "rewardType",\n              "type": "string"\n            }\n          ],\n          "name": "Contribution",\n          "type": "event"\n        },\n        "0xce96c271d8db9db4a90e538f30d7ec5a63f116893c4636688d9ce1502b5cc936": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": true,\n              "name": "contributor",\n              "type": "address"\n            },\n            {\n              "indexed": false,\n              "name": "username",\n              "type": "string"\n            },\n            {\n              "indexed": false,\n              "name": "date",\n              "type": "uint256"\n            }\n          ],\n          "name": "ContributorVerified",\n          "type": "event"\n        },\n        "0xbab878453bea46cf2222f6dd20b3fa8d80dc6ca2b5d4f854173f07227a21e1a6": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": false,\n              "name": "rewardType",\n              "type": "string"\n            },\n            {\n              "indexed": false,\n              "name": "reservedType",\n              "type": "string"\n            },\n            {\n              "indexed": false,\n              "name": "value",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "date",\n              "type": "uint256"\n            }\n          ],\n          "name": "RewardValueSet",\n          "type": "event"\n        },\n        "0x258560b026a56a296599cd6b9470cc1143ece6f555f315dfcb1a846e3b354ca6": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": false,\n              "name": "auctionRound",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "startDate",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "endDate",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "lockDate",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "tokensOffered",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "initialPrice",\n              "type": "uint256"\n            }\n          ],\n          "name": "NewAuction",\n          "type": "event"\n        },\n        "0x7dbcead426ca32224fb5f39a2538f5556a55e0f389a53dd96411722da3c6f20a": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": false,\n              "name": "auctionRound",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "weightedAveragePrice",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "fundLimit",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "date",\n              "type": "uint256"\n            }\n          ],\n          "name": "SealAuction",\n          "type": "event"\n        },\n        "0x5124687ebf4b12510acc9417c75c9c15ddc94a77bec8aca6889d61c02a5898a6": {\n          "anonymous": false,\n          "inputs": [\n            {\n              "indexed": false,\n              "name": "auctionRound",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "numberOfHolders",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "fundsCollected",\n              "type": "uint256"\n            },\n            {\n              "indexed": false,\n              "name": "date",\n              "type": "uint256"\n            }\n          ],\n          "name": "AuctionResults",\n          "type": "event"\n        }\n      },\n      "updated_at": 1502487442134\n    }\n  },\n  "schema_version": "0.0.5",\n  "updated_at": 1502487442134\n}';
// import gittokenSQLite from './sqlite/index'

var GitTokenMiddleware = function (_KeystoreGenerator) {
  (0, _inherits3.default)(GitTokenMiddleware, _KeystoreGenerator);

  function GitTokenMiddleware(options) {
    (0, _classCallCheck3.default)(this, GitTokenMiddleware);

    var _this

    // bind utility methods to class scope


    /**
     * TODO Replace this with database
     */
    = (0, _possibleConstructorReturn3.default)(this, (GitTokenMiddleware.__proto__ || (0, _getPrototypeOf2.default)(GitTokenMiddleware)).call(this, options));

    var isGitHubHook = options.isGitHubHook,
        config = options.config,
        web3Provider = options.web3Provider,
        dirPath = options.dirPath,
        contractFile = options.contractFile,
        faucetActive = options.faucetActive,
        mysqlOpts = options.mysqlOpts;


    _this.mysqlOpts = mysqlOpts;
    _this.faucetActive = faucetActive;
    _this.dirPath = dirPath;
    _this.contractFile = contractFile;
    _this.gittokenContract = JSON.parse(GitTokenContract);
    _this.isGitHubHook = isGitHubHook;
    _this.config = config;

    // this.dirPath = dirPath
    // this.web3Provider = web3Provider
    // this.web3 = new Web3(new Web3.providers.HttpProvider(web3Provider))
    // this.eth = promisifyAll(this.web3.eth)
    // this.smtpHandleAuth = smtpHandleAuth.bind(this)
    // this.smtpServer = smtpServer.bind(this)
    // this.smtpServer({
    //   onAuth: this.smtpHandleAuth
    // })


    // this.gittokenSQLite = gittokenSQLite.bind(this)
    _this.gittokenHyperlog = _index8.gittokenHyperlog.bind(_this);
    _this.logMessage = _index8.logMessage.bind(_this);
    _this.logExchange = _index8.logExchange.bind(_this);
    _this.logVote = _index8.logVote.bind(_this);
    _this.handleLogin = _index9.handleLogin.bind(_this);
    _this.verifyContributor = _index10.verifyContributor.bind(_this);
    _this.handleVerification = _index9.handleVerification.bind(_this);
    _this.handleAuthentication = _index9.handleAuthentication.bind(_this);
    _this.handleContractDetails = _index9.handleContractDetails.bind(_this);

    _this.gittokenHyperlog({});

    _this.socketHandler = _index4.socketHandler.bind(_this);
    _this.socketRouter = _index4.socketRouter.bind(_this);
    _this.socketHandler({}

    // Setup Analytics Processor
    );_this.analyticsProcessor = _index2.default.bind(_this);
    _this.configureAnalytics = _configure2.default.bind(_this);
    _this.analyticsProcessor({}

    // Bind event methods to class scope
    );_this.ping = _index9.ping.bind(_this);
    _this.push = _index9.push.bind(_this);
    _this.pullRequest = _index9.pullRequest.bind(_this);
    _this.milestone = _index9.milestone.bind(_this);
    _this.organization = _index9.organization.bind(_this);_this.getSavedContract = _index10.getSavedContract.bind(_this);
    _this.createGitTokenContract = _index10.createGitTokenContract.bind(_this);
    _this.saveContractDetails = _index10.saveContractDetails.bind(_this);
    _this.getContractDetails = _index10.getContractDetails.bind(_this);
    _this.retrieveDetails = _index5.retrieveDetails.bind(_this);
    _this.parsePushEvent = _index5.parsePushEvent.bind(_this);
    _this.parseRepositoryStats = _index5.parseRepositoryStats.bind(_this);
    _this.parseGitHubEvents = _index5.parseGitHubEvents.bind(_this);
    _this.retrieveGitHubUser = _index5.retrieveGitHubUser.bind(_this);
    _this.faucet = _index5.faucet.bind(_this);
    _this.generateReward = _index10.generateReward.bind(_this);
    _this.calculateRewardBonus = _index5.calculateRewardBonus.bind(_this);
    _this.gittokenAPI = _index7.default.bind(_this);_this.middlewareState = {
      accounts: {},
      contract: {},
      blockchain: {}
    };

    return _this;
  }

  (0, _createClass3.default)(GitTokenMiddleware, [{
    key: 'routeRequests',
    value: function routeRequests() {
      var _this2 = this;

      var router = (0, _express.Router)();

      router.post('/verify/:address', function (req, res) {
        _this2.handleVerification({
          user: req.user,
          address: req.params.address
        }).then(function (authStatus) {
          var code = authStatus.code,
              data = authStatus.data;

          res.status(code).send(data);
        }).catch(function (error) {
          // console.log('/verify/:address::error', error)
          res.status(500).send(error);
        });
      });

      router.post('/', function (req, res, next) {
        var headers = req.headers,
            body = req.body;

        _bluebird2.default.resolve().then(function () {
          if (_this2.isGitHubHook) {
            // console.log('GitHub WebHook Request')
            return _this2.handleGitHubWebHookEvent({
              event: headers['x-github-event'],
              data: { headers: headers, body: body }
            });
          } else {
            throw new Error('Request not yet configured');
          }
        }).then(function (response) {
          res.status(200).send((0, _stringify2.default)(response, null, 2));
        }).catch(function (error) {
          console.log('routeRequests::error', error);
          res.status(500).send(error.message);
        });
      });

      router.post('/faucet/:address', function (req, res, next) {
        if (!_this2.faucetActive) {
          res.status(500).send((0, _stringify2.default)({
            message: 'Faucet is not active! Set { faucetActive: true } to enable'
          }, null, 2));
        } else {
          var from = void 0;
          _this2.importKeystore({}).then(function (_ks) {
            from = '0x' + _this2.ks.getAddresses()[0];
            return _this2.eth.getBalanceAsync(from);
          }).then(function (balance) {
            console.log('Balance of ' + from + '::balance', balance);
            if (balance.toNumber() > 2e16) {
              return _this2.signTransaction({
                to: '0x' + req.params.address,
                from: from,
                value: 2e16,
                gasLimit: 4e6,
                data: null
              });
            } else {
              res.status(500).send((0, _stringify2.default)({
                message: 'Faucet does not have enough funds! Send funds to ' + from,
                balance: balance
              }, null, 2));
            }
          }).then(function (signedTx) {
            // console.log('`0x${signedTx}`', `0x${signedTx}`)
            return _this2.eth.sendRawTransactionAsync('0x' + signedTx);
          }).then(function (txHash) {
            // console.log('txHash', txHash)
            return _this2.getTransactionReceipt(txHash);
          }).then(function (txReceipt) {
            // console.log('txReceipt', txReceipt)
            res.status(200).send(txReceipt);
          }).catch(function (error) {
            res.status(500).send(error.message);
          });
        }
      });

      router.use('/api/v1', this.gittokenAPI);

      return router;
    }
  }, {
    key: 'handleGitHubWebHookEvent',
    value: function handleGitHubWebHookEvent(_ref) {
      var _this3 = this;

      var event = _ref.event,
          data = _ref.data;

      return new _bluebird2.default(function (resolve, reject) {
        // console.log('handleGitHubWebHookEvent::event', event)
        // console.log('handleGitHubWebHookEvent::data', data)

        switch (event) {
          case 'ping':
            resolve(_this3.ping({ event: event, data: data }));
            break;
          case 'milestone':
            resolve(_this3.milestone({ event: event, data: data }));
            break;
          case 'organization':
            resolve(_this3.organization({ event: event, data: data }));
            break;
          default:
            resolve(_this3.generateReward({
              rewardType: event,
              deliveryID: data['headers']['x-github-delivery'],
              contributorUsername: data['body']['sender']['login'],
              rewardBonus: 0,
              reservedType: ''
            })
            // let error = new Error('Invalid Event Found')
            // reject(error)
            );}
      });
    }
  }]);
  return GitTokenMiddleware;
}(_KeystoreGenerator3.default);

exports.default = GitTokenMiddleware;